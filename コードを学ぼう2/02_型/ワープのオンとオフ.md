# ワープのオンとオフ

```swift
var gemCoutner = 0

func turnAround() {
    turnLeft()
    turnLeft()    
}

func collectGemOrToogleSwitch() {
    if isOnGem {
        collectGem()
        gemCoutner += 1
    } else if isOnClosedSwitch {
        toggleSwitch()            
    }
}

func togglePortal() {
    if purplePortal.isActive {
        purplePortal.isActive = false    
    } else {
        purplePortal.isActive = true
    } 
}

while gemCoutner < 7 {
    moveForward()
    collectGemOrToogleSwitch()
    if isBlocked {
        turnAround()
        togglePortal()        
    }
}
```