# ワープを正しく操作する

```swift
var gemCounter = 0

func turnAround() {
    turnLeft()
    turnLeft()    
}

func collectAndCountGem() {
    collectGem()
    gemCounter += 1
}

func togglePortals() {
    if bluePortal.isActive {
        bluePortal.isActive = false
        pinkPortal.isActive = true
    } else {
        bluePortal.isActive = true
        pinkPortal.isActive = false
    }
}

pinkPortal.isActive = false
while gemCounter < 4 {
    moveForward()
    if isOnGem { 
        collectAndCountGem() 
    }
    if isBlocked {
        turnAround()
        togglePortals()        
    }
}
```